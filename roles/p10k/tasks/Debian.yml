---
- name: "Debian | Update pacman cache"
  become: true
  ansible.builtin.apt:
    update_cache: true

- name: "Debian | Install ZSH"
  become: true
  ansible.builtin.apt:
    name: zsh
    state: present

- name: "Debian | Getting script (Oh My Zsh)"
  become: false
  get_url:
    url: https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh
    dest: /tmp/install_oh_my_zsh.sh
    mode: '0755'

- name: "Debian | Checking if Oh My Zsh is installed"
  stat:
    path: "{{ ansible_user_dir }}/.oh-my-zsh"
  register: ohmyzsh_dir

- name: "Debian | Installing Oh My Zsh"
  become: false
  shell: /tmp/install_oh_my_zsh.sh --unattended
  args:
    executable: /bin/bash
  when: not ohmyzsh_dir.stat.exists

